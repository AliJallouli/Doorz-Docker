<div class="container reset-container" *ngIf="!isLoading">
  <h3 class="text-center">{{ 'RESETPASSWORD.TITLE' | translate }}</h3>

  <!-- ðŸ”´ Message d'erreur gÃ©nÃ©ral -->
  <div *ngIf="errorMessage && !showForm" class="alert alert-danger text-center">
    {{ errorMessage | translate }}
  </div>

  <!-- Ã‰tape OTP -->
  <form *ngIf="showOtpForm && !showForm" [formGroup]="form" (ngSubmit)="validateOtp()">
    <!-- OTP input -->
    <div class="form-group">
      <label>{{ 'RESETPASSWORD.LABEL.OTP' | translate }}</label>
      <input type="text" formControlName="otp" class="form-control" maxlength="6" />
    </div>
    <div class="form-group">
      <button type="submit" class="btn-submit">
        {{ 'RESETPASSWORD.BUTTON.VALIDATE_OTP' | translate }}
      </button>
    </div>
  </form>

  <!-- âœ… Formulaire visible si token valide -->
  <form *ngIf="showForm" [formGroup]="form" (ngSubmit)="onSubmit()" class="reset-form">
    <!-- Email (readonly) -->
    <div class="form-group">
      <label>{{ 'RESETPASSWORD.LABEL.EMAIL' | translate }}</label>
      <input type="email" formControlName="email" class="form-control" readonly />
    </div>

    <!-- Champs de mot de passe -->
    <app-password-input
      [form]="form"
      [fieldError]="{}"
      [submitted]="submitted"
      passwordControlName="newPassword"
      confirmPasswordControlName="confirmPassword"
    ></app-password-input>

    <!-- âœ… Bouton submit -->
    <div class="form-group button-container">
      <button type="submit" class="btn-submit">
        {{ 'RESETPASSWORD.BUTTON.SUBMIT' | translate }}
      </button>
    </div>
  </form>

  <!-- Erreur globale -->
  <div *ngIf="errorMessage" class="text-danger text-center mt-2">
    {{ errorMessage | translate }}
  </div>

  <!-- âœ… Message succÃ¨s (affichÃ© aprÃ¨s confirmation rÃ©ussie) -->
  <div class="alert alert-success text-center mt-3" *ngIf="successMessage && !showForm">
    {{ successMessage | translate }}
  </div>
</div>
